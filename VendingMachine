#include <stdio.h>


// Constants for the Vending Machine prices and minimum quantity alert
int Min=5;
float itemPriceA = 1.5;
float itemPriceB=2.0;
float itemPriceC=2.5;

// Passwords for the admin and also the quantity for the items
int password= 1234;
float total_amount=0;
int quantityA= 10;
int quantityB= 10;
int quantityC= 10;


// Function Prototypes for the Vending Machine
void itemPurchase();
void adminMode ();

int main() {
    int choice;

    while(1) {
        printf("Welcome to the Vending Machine\t\n");
        printf("1) Purchase the item for the consumer\t\n");
        printf("2) Admin mode for the vending machine\t\n");
        printf("3) Exit\t\n");
        printf("Enter your choice number: ");
        scanf("%i",&choice);

        switch(choice) {
            case 1:
                 itemPurchase();
                 break;
            case 2:
                adminMode();
                break;
            case 3:
                 printf("Exiting the program. Thank you.\n");
                 return 0;
            default:
                printf("Choice invalid. Please try again.\n");            
        }
    }
}


void itemPurchase(){
    printf("Items Available:\n");
    printf("1) Item A ~ Price: %.2f\n", itemPriceA);
    printf("2) Item b ~ Price: %.2f\n", itemPriceB);
    printf("3) Item c ~ Price: %.2f\n", itemPriceC);
    printf("0) Cancel the operation\n");

    int choiceItem;
    float dirhams;

    while (1) {
        printf("Enter your selection: \n ");
        scanf("%i", &choiceItem);

        if(choiceItem == 0) {
            printf("Purchase canceled.\n");
            return;
        }

        float itemPrice = 0;
        int   *quantity;

        switch (choiceItem) {
            case 1:
                itemPrice = itemPriceA;
                quantity = &quantityA;
                break;
            case 2:
                itemPrice = itemPriceB;
                quantity = &quantityB;
                break;
            case 3:
                itemPrice = itemPriceC;
                quantity = &quantityC;
                break;
            default:
                printf("Invalid item choice. Please try again.\t\n");
                continue;    
        }
    } 
    
    
printf("You selected item %c with a price of %.2f. Confirm? (Y/N): \n",);
char confirmation;
scanf(" %c", &confirmation);

if (confirmation != 'Y' && confirmation != 'y') {
    printf("Purchase canceled.\n");
    return;
}


float paidAmount = 0
while (paidAmount < itemPrice) {
    printf("Please insert a dirhams (0.25, 0.50, 1.00): ");
    scanf("%f", &dirhams);

    if (fils != 0.25 && fils != 0.50 && fils != 1.00) {
        printf("Invalid dirhams. Try again or cancel the purchase.\n");
        char cancel;
        printf("Cancel the purchase? (Y/N): \n");
        scanf("%c", &cancel);

        if (cancel == 'Y' || cancel == 'y') {
            printf("Purchase canceled. \n");
            return;
        }

    } else {
        paidAmount += dirhams;
    }
}
    
*quantity -= 1;
total_amount += itemPrice;

printf("You have purchased item %c for %.2f. Paid: %.2f. Change: %.2f\n", 'A' + choiceItem - 1, itemPrice, paidAmount, paidAmount - itemPrice);

if (*quantity <= Min) {
    printf("Alert: The quantity of the item %c is low! \n", 'A' + choiceItem - 1);
}
return;

}

    

    

    
